apiVersion: apps/v1
kind: Deployment
metadata:
  name: discord-bot-node
  namespace: discord
spec:
  selector:
    matchLabels:
      app: discord-bot-node
  template:
    metadata:
      labels:
        app: discord-bot-node
    spec:
      imagePullSecrets:
        - name: regcred
      containers:
      - name: discord-bot-node
        image: registry.flou.dev/discord-bot-node:552a7b36-f2b2-452a-a2c8-85bef9be6581
        env:
        - name: TOKEN
          valueFrom:
            secretKeyRef:
              name: secret
              key: token
        - name: CHANNEL_ID_BUGREPORT
          valueFrom:
            configMapKeyRef:
              name: config
              key: live_channel_id_bugreport
        - name: CHANNEL_ID_SUGGESTIONS
          valueFrom:
            configMapKeyRef:
              name: config
              key: live_channel_id_suggestion
        - name: CHANNEL_ID_SUPPORT
          valueFrom:
            configMapKeyRef:
              name: config
              key: live_channel_id_support
        resources:
          requests:
            memory: "50Mi"
            cpu: "10m"
          limits:
            memory: "150Mi"
            cpu: "100m"
